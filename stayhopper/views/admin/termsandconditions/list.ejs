<%-include('../shared/header.ejs',{active:'',parent:'settings'})%>
<!-- bootstrap wysihtml5 - text editor -->
<link rel="stylesheet" href="/public/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
<style>
    .box-tools{
        display: none;
    }
</style>
<div class="content-inner">
    <!-- Page Header-->
    <header class="page-header">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item" aria-current="page">
                        <a href="/admin/generalsettings">General Settings</a>
                    </li>
                    <li class="breadcrumb-item active fw-700" aria-current="page">Terms and Conditions</li>
                </ol>
            </nav>
        </div>
    </header>
    <div class="container-fluid">
        <div class="row wrapper mt-0 mb-0 pt-4 bg-white pb-2 px-4">
            <div class="col-sm-12 mb-2 mb-md-3">
                <div class="form-header mt-2">
                    Terms and Conditions
                </div>
            </div>
            <div class="modal-body">
                <form id="termsForm">
                    <div class="box">
                        <div class="box-header">
                        </div>
                        <div class="box-body pad">
                            <input type="hidden" name="id" value="<%=result._id%>">
                                <textarea class="textarea" name="description" placeholder="Place some text here" style="width: 100%; height: 200px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;">
                                    <%=result.description%>
                                </textarea>
                        </div>
                    </div>
                    <div class="col-sm-12 mt-3 mt-md-5 mb-2 mb-md-2">
                        <div class="header-buttons d-flex justify-content-center">
                            <button type="submit" class="btn btn-primary btn-lg saveBtn mr-md-4 pl-5 pr-5">Save</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="/public/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script>
        $(function () {
            //bootstrap WYSIHTML5 - text editor
            $('.textarea').wysihtml5({
                toolbar: {
                    "fa": false,
                    "font-styles": true, // Font styling, e.g. h1, h2, etc.
                    // "emphasis": false, // Italics, bold, etc.
                    // "lists": false, // (Un)ordered lists, e.g. Bullets, Numbers.
                    // "html": false, // Button which allows you to edit the generated HTML.
                    // "link": false, // Button to insert a link.
                    // "image": false, // Button to insert an image.
                    // "color": false, // Button to change color of font
                    // "blockquote": false, // Blockquote
                }
            })
        })
    </script>
    <script>
        $("#termsForm").validate({
            normalizer: function (value) {
                return $.trim(value);
            },
            rules: {
                description: {
                    required: true,
                }
            },
            messages: {
                description: {
                    required: "Description must be required",
                }
            },
            submitHandler: function (form) {
                $('.saveBtn').prop('disabled', true);
                var form = document.getElementById('termsForm');
                var data = $(form).serialize();
                $.ajax({
                    type: "post",
                    url: "/admin/terms_conditions",
                    data: data,
                    dataType: 'json',
                    success: function (data) {
                        if (data.status == 1) {
                            if (data.message) {
                                $.confirm({
                                    title: 'Success!',
                                    content: data.message,
                                    buttons: {
                                        ok: function () {
                                            document.getElementById("termsForm").reset();
                                            window.location.reload();
                                        }
                                    }
                                });
                                document.getElementById("termsForm").reset();
                            }
                        } else {
                            if (data.errors) {
                                for (i = 0; i < data.errors.length; i++) {
                                    toastr["error"](data.errors[i]);
                                }
                            }
                            if (data.message) {
                                toastr["error"](data.message);
                            }
                        }
                        $('.saveBtn').prop('disabled', false);
                    },
                    error: function (error) {
                        $('.saveBtn').prop('disabled', false);
                    }
                });
                return false;
            }
        });
    </script>
    <%-include('../shared/footer.ejs')%>